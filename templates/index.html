{% extends "base.html" %}

{% block content %}
<div class="container">
    <!-- Hero Section -->
    {% if hero_article %}
    <section class="hero" aria-label="Featured story">
        <div class="hero-content">
            <div class="hero-image">
                {% if hero_article.has_image %}
                    <img src="{{ url_for('get_image', article_id=hero_article.id) }}" alt="{{ hero_article.title }}">
                {% elif hero_article.image_url %}
                    <img src="{{ hero_article.image_url }}" alt="{{ hero_article.title }}">
                {% else %}
                <div style="background: linear-gradient(135deg, #4A6378 0%, #0B6B53 100%); width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">
                    <span style="color: rgba(255,255,255,0.3); font-size: 2rem;">Featured Image</span>
                </div>
                {% endif %}
            </div>
            <div class="hero-body">
                {% if hero_article.tags %}
                <div>
                    {% for tag in hero_article.tags %}
                        <span class="category-label" style="background-color: {{ tag | get_background_color }}; color: {{ tag | get_text_color }};">{{ tag }}</span>
                    {% endfor %}
                </div>
                {% endif %}
                <h1>{{ hero_article.title }}</h1>
                <p class="article-meta">By {{ hero_article.author }} | {{ hero_article.created_at.strftime('%B %d, %Y') }}</p>
                <p class="hero-excerpt">{{ hero_article.content | striptags | truncate(200) }}</p>
                <a href="{{ url_for('article', article_id=hero_article.id) }}" class="btn-read-more">Read Full Story <span>â†’</span></a>
            </div>
        </div>
    </section>
    {% endif %}

    <!-- Section Navigation -->
    <nav class="section-nav" aria-label="Article sections">
        <a href="{{ url_for('index') }}" class="{% if not selected_tag %}active{% endif %}">All Stories</a>
        {% for tag in tags %}
        <a href="{{ url_for('index', tag=tag) }}" class="{% if selected_tag == tag %}active{% endif %}">{{ tag }}</a>
        {% endfor %}
    </nav>

    <!-- Latest Articles -->
    <section class="articles-section">
        <div class="article-grid">
            {% for article in articles %}
            <a href="{{ url_for('article', article_id=article.id) }}" class="article-card">
                <div class="card-image">
                    {% if article.has_image %}
                        <img src="{{ url_for('get_image', article_id=article.id) }}" alt="{{ article.title }}">
                    {% elif article.image_url %}
                        <img src="{{ article.image_url }}" alt="{{ article.title }}">
                    {% else %}
                        <div style="background: linear-gradient(135deg, #EDEAE4 0%, #E0DDD5 100%); width: 100%; height: 100%;"></div>
                    {% endif %}
                </div>
                <div class="card-content">
                    {% if article.tags %}
                    <div>
                        {% for tag in article.tags %}
                                <span class="category-label" style="background-color: {{ tag | get_background_color }}; color: {{ tag | get_text_color }};">{{ tag }}</span>
                        {% endfor %}
                    </div>
                    {% endif %}
                    <h3>{{ article.title }}</h3>
                    <p class="card-meta">By {{ article.author }} | {{ article.created_at.strftime('%B %d, %Y') }}</p>
                </div>
            </a>
            {% else %}
                <p>No articles found. Check back later!</p>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}